# VTB Finance Tracker

VTB Finance Tracker — веб‑приложение на Django для управления личными финансами: учет счетов и карт, работа с транзакциями и категориями, планирование бюджета, аналитика и дашборд.

## Требования
- Python 3.10+ (проверено на 3.11)
- SQLite (поставляется вместе с Python) для локальной разработки
- Node не требуется: интерфейс рендерится Django-шаблонами

## Установка и запуск
1. Клонируйте репозиторий и перейдите в каталог проекта:
   ```bash
   git clone <repo-url>
   cd vtb-finance-tracker1
   ```
2. Создайте и активируйте виртуальное окружение (рекомендуется):
   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\\Scripts\\activate
   ```
3. Установите зависимости из фиксированного списка:
   ```bash
   pip install -r requirements.txt
   ```
4. Подготовьте файл окружения на основе примера и при необходимости измените значения:
   ```bash
   cp .env.example .env
   ```
   Переменные окружения:
   - `SECRET_KEY` — секретный ключ Django
   - `DEBUG` — `True` для локальной разработки
   - `ALLOWED_HOSTS` — список доменов/хостов, разрешённых для приложения (через запятую)
   - `CORS_ALLOWED_ORIGINS` — список разрешённых Origins для CORS (через запятую)

## База данных
Примените миграции, чтобы создать локальную базу SQLite:
```bash
python manage.py migrate
```

Для «чистой» перезагрузки можно удалить `db.sqlite3` и снова применить миграции. В проекте есть вспомогательный скрипт `reset_db.py` для автоматизации очистки.

## Запуск сервера
Запустите встроенный сервер разработки:
```bash
python manage.py runserver
```

Приложение будет доступно по адресу http://127.0.0.1:8000/.

## Учётные записи
Создайте суперпользователя для входа в админку или авторизации в интерфейсе:
```bash
python manage.py createsuperuser
```

Если хотите начать с готовыми данными, загрузите демо-фикстуру (см. ниже) и используйте учётные данные:
- **Логин:** `admin`
- **Пароль:** `admin123`

## Демо-данные (fixtures)
Быстрый старт с заранее подготовленными данными:
1. Убедитесь, что миграции применены:
   ```bash
   python manage.py migrate
   ```
2. Загрузите фикстуру:
   ```bash
   python manage.py loaddata fixtures/sample_data.json
   ```

Фикстура создаёт администратора (`admin` / `admin123`), категории, пример транзакций, запись бюджета и тестовую карту, привязанную к админскому аккаунту.

## Тесты и проверки
- Системные проверки Django:
  ```bash
  python manage.py check
  ```
- Тестовый набор:
  ```bash
  python manage.py test
  ```

### Документация по регрессионным тестам («тест на баги»)
- **Что проверяется:**
  - Страница списка транзакций (`TransactionListView`) корректно рендерит шаблон `transactions/transaction_list.html`, считает баланс на стороне представления и отображает созданную транзакцию.
  - Страница удаления транзакции (`TransactionDeleteView`) рендерит шаблон подтверждения `transactions/transaction_confirm_delete.html` и доступна после авторизации.
- **Где лежат тесты:** `transactions/tests.py`.
- **Как запускаются:** вместе со всем тестовым набором командой `python manage.py test` (см. выше). Отдельно для приложения транзакций можно выполнить:
  ```bash
  python manage.py test transactions
  ```
- **Какие данные нужны:** тесты создают пользователя, категорию и транзакцию самостоятельно, поэтому дополнительных фикстур не требуется.
- **Что даёт:** предотвращает повторное возникновение багов вида `TemplateDoesNotExist` для списка и удаления транзакций и защищает логику вычисления баланса в списке.

## Структура проекта (основное)
- `accounts/` — кастомная модель пользователя и аутентификация
- `transactions/` — CRUD по транзакциям и категориям, связанные шаблоны
- `cards/` — управление картами
- `analytics/` — логика бюджета и аналитики
- `dashboard/` — виджеты и представления дашборда
- `templates/` — общие Django-шаблоны
- `static/` — статические файлы для разработки (коллектятся в `staticfiles/` при необходимости)
- `vtb_tracker/` — настройки проекта и корневой роутер

## Зависимости
Все зависимости перечислены и зафиксированы в `requirements.txt` для воспроизводимых установок.

## Пример конфигурации
Базовый файл окружения `.env.example` не содержит секретов и подходит для локального старта. Скопируйте его в `.env` и подставьте свои значения.

## Лицензия
Отдельный файл лицензии не включён. Добавьте его, если планируете публичное распространение проекта.